(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{407:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",[a("p",[t._v("基于SpringBoot 的通用业务日志记录组件")]),t._v(" "),a("p",[t._v("Based SpringBoot Service Log component")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-log-spring-boot-starter/releases/latest"}},[a("img",{attrs:{alt:"GitHub release (latest by date)",src:"https://img.shields.io/github/v/release/SeeMountainSea/shanhai-log-spring-boot-starter"}})]),t._v(" "),a("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-log-spring-boot-starter/issues"}},[a("img",{attrs:{alt:"GitHub closed issues",src:"https://img.shields.io/github/issues/SeeMountainSea/shanhai-log-spring-boot-starter?color=009688"}})]),t._v(" "),a("a",{attrs:{href:"https://github.com/topics/java"}},[a("img",{attrs:{alt:"GitHub top language",src:"https://img.shields.io/github/languages/top/SeeMountainSea/shanhai-log-spring-boot-starter?color=eb8031"}})]),t._v(" "),a("br"),t._v(" "),a("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-log-spring-boot-starter/find/master"}},[a("img",{attrs:{alt:"GitHub Code Size",src:"https://img.shields.io/github/languages/code-size/SeeMountainSea/shanhai-log-spring-boot-starter?color=795548"}})]),t._v(" "),a("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-log-spring-boot-starter/find/master"}},[a("img",{attrs:{alt:"GitHub Code Lines",src:"https://img.shields.io/tokei/lines/github/SeeMountainSea/shanhai-log-spring-boot-starter?color=37474F"}})]),t._v(" "),a("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-log-spring-boot-starter/blob/master/LICENSE"}},[a("img",{attrs:{alt:"GitHub License",src:"https://img.shields.io/github/license/SeeMountainSea/shanhai-log-spring-boot-starter?color=534BAE"}})])])]),t._v(" "),a("h2",{attrs:{id:"组件能力"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件能力"}},[t._v("#")]),t._v(" 组件能力")]),t._v(" "),a("ul",[a("li",[t._v("支持基于Spring Aop+@RequestLog注解方式记录API(请求报文/响应报文/请求时间/请求用户/请求URI等)标准化日志")]),t._v(" "),a("li",[t._v("支持Spel表达式进行动态参数获取")]),t._v(" "),a("li",[t._v("支持自定义获取当前用户信息")]),t._v(" "),a("li",[t._v("支持自定义日志存储方式")]),t._v(" "),a("li",[t._v("支持日志标准化写入操作系统临时目录（日志存储默认实现）")]),t._v(" "),a("li",[t._v("支持无感知全流量日志自动采集（参考第10章节）")])]),t._v(" "),a("h2",{attrs:{id:"_1-引入依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-引入依赖"}},[t._v("#")]),t._v(" 1.引入依赖")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.wangshanhai.log"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("shanhai-log-spring-boot-starter"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${last.version}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("参数说明")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shanhai")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("consoleShow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启用控制台输出")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ignore-request-params")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#忽略请求报文入参类型")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" cn.hutool.system.UserInfo\n")])])]),a("h2",{attrs:{id:"_2-启用shanhailog-组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-启用shanhailog-组件"}},[t._v("#")]),t._v(" 2.启用ShanHaiLog 组件")]),t._v(" "),a("p",[t._v("使用注解@EnableShanHaiLog 即可启用ShanHaiLog 组件")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableShanHaiLog")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LogConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-requestlog配置参数详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-requestlog配置参数详解"}},[t._v("#")]),t._v(" 3.@RequestLog配置参数详解")]),t._v(" "),a("p",[t._v("使用@RequestLog即可对需要记录的API进行日志记录，相关定义如下：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名称")]),t._v(" "),a("th",[t._v("参数类型")]),t._v(" "),a("th",[t._v("参数描述")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("module")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("模块名称")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("level")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("日志级别")]),t._v(" "),a("td",[t._v("可自行定义日志级别然后分类处理")])]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("日志内容")]),t._v(" "),a("td",[t._v("如动作名称，菜单名称等")])]),t._v(" "),a("tr",[a("td",[t._v("currentUser")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("当前用户")]),t._v(" "),a("td",[t._v("当前用户，可以结合spel自动获取入参参数，参考样例描述")])]),t._v(" "),a("tr",[a("td",[t._v("fileUpload")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("本次请求是否为文件上传请求(默认:false)")]),t._v(" "),a("td",[t._v("开启后会自动记录上传的文件清单")])]),t._v(" "),a("tr",[a("td",[t._v("fileDownload")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("本次请求是否为文件下载(默认:false)")]),t._v(" "),a("td",[t._v("开启后会自动将响应报文置空")])])])]),t._v(" "),a("p",[t._v("使用方式样例如下：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Order"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("currentUser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#{#currentUser}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"分页查询订单-当前用户：#{#currentUser},当前页：#{#current}，每页条数：#{#size}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpResponse")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IPage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WorkOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryByPage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"currentUser"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" currentUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"size"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"current"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ……\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注:#{#currentUser} 为Spel表达式用法，可以提取对应方法的相关参数")])]),t._v(" "),a("h2",{attrs:{id:"_4-自定义日志存储"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-自定义日志存储"}},[t._v("#")]),t._v(" 4.自定义日志存储")]),t._v(" "),a("p",[t._v("Log组件预留了自定义日志存储接口，可以自行进行扩展，实现自己的日志存储方式。")]),t._v(" "),a("p",[t._v("接口定义如下：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestLogService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * 存储日志\n   * @param requestLogInfo\n   */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestLogInfo")]),t._v(" requestLogInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_5-自定义获取当前登录用户信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-自定义获取当前登录用户信息"}},[t._v("#")]),t._v(" 5.自定义获取当前登录用户信息")]),t._v(" "),a("p",[t._v("Log组件预留了自定义获取当前登录用户信息接口，可以自行进行扩展，实现与自己系统的用户鉴权体系的无缝对接。")]),t._v(" "),a("p",[t._v("接口定义如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("public interface RequestLogService {\n  /**\n   * 获取当前登录用户\n   * @return\n   */\n  public String getCurrentUser(HttpServletRequest request);\n}\n")])])]),a("p",[t._v("注：对于登录等非鉴权的场景，可以使用@RequestLog中的currentUser 并结合Spel进行使用。")]),t._v(" "),a("p",[a("strong",[t._v("当@RequestLog中的currentUser 存在Spel表达式时，表达式的优先级高于自定义接口实现的优先级。")])]),t._v(" "),a("h2",{attrs:{id:"_6-自定义参数写入通用requestloginfo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-自定义参数写入通用requestloginfo"}},[t._v("#")]),t._v(" 6.自定义参数写入通用RequestLogInfo")]),t._v(" "),a("p",[t._v("Log组件预留了自定义参数写入接口，方便用户在APILOG进行日志存储时，写入自定义参数。")]),t._v(" "),a("p",[t._v("接口定义如下：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestLogService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * 补充自定义扩展日志信息\n   * @return\n   */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExtLogInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("此扩展会在执行saveLog之前自动调用并写入RequestLogInfo->extLogInfo 字段")]),t._v(" "),a("h2",{attrs:{id:"_7-自定义实现源ip获取方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-自定义实现源ip获取方法"}},[t._v("#")]),t._v(" 7.自定义实现源IP获取方法")]),t._v(" "),a("p",[t._v("Log组件预留了自定义源IP获取方法，方便用户自定义实现源IP获取策略。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestLogService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * 自定义源IP获取方法\n   * @return\n   */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReqSourceIp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_8-启用api-log-控制台输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-启用api-log-控制台输出"}},[t._v("#")]),t._v(" 8.启用API Log 控制台输出")]),t._v(" "),a("p",[t._v("由于Log组件提供了默认存储实现(存储于操作系统临时目录)，因此API LOG的控制台输出默认是被关闭的。")]),t._v(" "),a("p",[t._v("在开发阶段，可以考虑打开API LOG 控制台输出查看相关报文。生产环境在自定义存储实现时，也可以考虑打开控制台输出，做日志存储灾备。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("shanhai.log.consoleShow=true\n")])])]),a("h2",{attrs:{id:"_9-标准化日志对象参数详解-requestloginfo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-标准化日志对象参数详解-requestloginfo"}},[t._v("#")]),t._v(" 9.标准化日志对象参数详解(RequestLogInfo)")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名称")]),t._v(" "),a("th",[t._v("参数类型")]),t._v(" "),a("th",[t._v("参数描述")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("currentUser")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("当前用户")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("接口日志")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("level")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("日志级别")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("module")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("所属模块")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("reqTime")]),t._v(" "),a("td",[t._v("Date")]),t._v(" "),a("td",[t._v("请求开始时间")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("respTime")]),t._v(" "),a("td",[t._v("Date")]),t._v(" "),a("td",[t._v("请求结束时间")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("agentInfo")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("浏览器信息")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("reqSourceIp")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("用户ip")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("reqUrl")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("请求url")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("reqInfo")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("请求报文")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("respInfo")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("响应报文")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("httpMethod")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("HTTP请求类型")]),t._v(" "),a("td")])])]),t._v(" "),a("h2",{attrs:{id:"_10-启用shanhaitracelog组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-启用shanhaitracelog组件"}},[t._v("#")]),t._v(" 10.启用ShanHaiTraceLog组件")]),t._v(" "),a("p",[t._v("使用注解@EnableShanHaiTraceLog即可启用ShanHaiTraceLog 组件,该组件自动对SpirngBoot的Get/POST/DELETE/PUT等请求注解进行AOP扫描，无感知生成全流量报文。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("@Configuration\n@EnableShanHaiTraceLog\npublic class LogConfig {\n}\n")])])]),a("p",[t._v("应用场景：老旧系统接口记录及出入参数据采集")])])}),[],!1,null,null,null);a.default=n.exports}}]);