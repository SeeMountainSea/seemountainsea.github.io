(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{406:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",[s("p",[t._v(" 基于SpringBoot 的参数校验组件（告别HibernateValidator，享受私家定制）")]),t._v(" "),s("p",[t._v("ShanHaiFormRules-based SpringBoot Parameter Rules Check Component")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-formrules-spring-boot-starter\n/releases/latest"}},[s("img",{attrs:{alt:"GitHub release (latest by date)",src:"https://img.shields.io/github/v/release/SeeMountainSea/shanhai-formrules-spring-boot-starter"}})]),t._v(" "),s("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-formrules-spring-boot-starter\n/issues"}},[s("img",{attrs:{alt:"GitHub closed issues",src:"https://img.shields.io/github/issues/SeeMountainSea/shanhai-formrules-spring-boot-starter?color=009688"}})]),t._v(" "),s("a",{attrs:{href:"https://github.com/topics/java"}},[s("img",{attrs:{alt:"GitHub top language",src:"https://img.shields.io/github/languages/top/SeeMountainSea/shanhai-formrules-spring-boot-starter?color=eb8031"}})]),t._v(" "),s("br"),t._v(" "),s("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-formrules-spring-boot-starter\n/find/master"}},[s("img",{attrs:{alt:"GitHub Code Size",src:"https://img.shields.io/github/languages/code-size/SeeMountainSea/shanhai-formrules-spring-boot-starter?color=795548"}})]),t._v(" "),s("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-formrules-spring-boot-starter\n/find/master"}},[s("img",{attrs:{alt:"GitHub Code Lines",src:"https://img.shields.io/tokei/lines/github/SeeMountainSea/shanhai-formrules-spring-boot-starter?color=37474F"}})]),t._v(" "),s("a",{attrs:{href:"https://github.com/SeeMountainSea/shanhai-formrules-spring-boot-starter\nr/blob/master/LICENSE"}},[s("img",{attrs:{alt:"GitHub License",src:"https://img.shields.io/github/license/SeeMountainSea/shanhai-formrules-spring-boot-starter?color=534BAE"}})])])]),t._v("\n## 组件能力\n"),s("ul",[s("li",[s("p",[t._v("支持注解方式执行参数检验（类似ElementUI-validator风格）。")])]),t._v(" "),s("li",[s("p",[t._v("提供较为常用的规则实现，同时提供了自定义规则扩展能力，")]),t._v(" "),s("p",[t._v("告别Hibernate validator 分组方式无法高度定制多API共享入参的情况。")])])]),t._v(" "),s("h2",{attrs:{id:"_1-引入依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-引入依赖"}},[t._v("#")]),t._v(" 1.引入依赖")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.wangshanhai.formrules"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("shanhai-formrules-spring-boot-starter"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0.1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"_2-启用shanhiformrules-组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-启用shanhiformrules-组件"}},[t._v("#")]),t._v(" 2.启用ShanHiFormRules 组件")]),t._v(" "),s("p",[t._v("使用注解@EnableShanHiFormRules即可启用ShanHiFormRules 组件")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableShanHiFormRules")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"_3-校验组件详细说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-校验组件详细说明"}},[t._v("#")]),t._v(" 3.校验组件详细说明")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("注解")]),t._v(" "),s("th",[t._v("用途")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("@ShanHaiForm")]),t._v(" "),s("td",[t._v("标记该方法需要进行参数校验")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("@FormRule")]),t._v(" "),s("td",[t._v("标记需要校验的对象")]),t._v(" "),s("td",[t._v("target：对象名称，即方法中的变量名 "),s("br"),t._v("rules:规则集合"),s("br"),t._v("enable: 是否启用该规则（默认启用）")])]),t._v(" "),s("tr",[s("td",[t._v("@Rule")]),t._v(" "),s("td",[t._v("规则定义")]),t._v(" "),s("td",[t._v("ruleType 支持："),s("br"),t._v(" 非空校验  : RuleCollect.NOT_EMPTY "),s("br"),t._v(" 正则校验: RuleCollect.REG_EXP; "),s("br"),t._v(" 字符串长度校验: RuleCollect.STR_LENTH  "),s("br"),t._v(" 枚举校验: RuleCollect.ENUM;")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-1-非空校验-rulecollect-not-empty"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-非空校验-rulecollect-not-empty"}},[t._v("#")]),t._v(" 3.1 非空校验（RuleCollect.NOT_EMPTY）")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("   "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ShanHaiForm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FormRule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rulesForm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("rules "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Rule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ruleType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuleCollect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT_EMPTY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("scanFields "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("errorCode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"参数不能为空！"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restRules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RulesForm")]),t._v(" rulesForm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("scanFields ：支持* 或者某个字段或者嵌套对象的字段，例如（form.zhangsan）。嵌套对象必须有明确的类型定义，否则无法支持嵌套对象的输入校验。")]),t._v(" "),s("p",[t._v("errorCode：异常编码")]),t._v(" "),s("p",[t._v("message：异常提示")]),t._v(" "),s("p",[t._v("对于存在异常的，会抛出如下异常：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpFormRulesException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("errorCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("field"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("rule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("自己可以自行进行解析和输出。")]),t._v(" "),s("h3",{attrs:{id:"_3-2-正则校验-rulecollect-reg-exp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-正则校验-rulecollect-reg-exp"}},[t._v("#")]),t._v(" 3.2 正则校验（RuleCollect.REG_EXP）")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("   "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ShanHaiForm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FormRule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rulesForm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("rules "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Rule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ruleType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuleCollect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REG_EXP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("scanFields "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"projectType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" regExp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RegExpCollect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NUMBER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("errorCode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1002")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"不符合格式要求！"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restRules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RulesForm")]),t._v(" rulesForm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("regExp: 正则表达式，可以使用内置的一些常用正则，例如：RegExpCollect.NUMBER，也可以自己写符合自己需要的正则表达式。")]),t._v(" "),s("h3",{attrs:{id:"_3-3-字符串长度校验-rulecollect-str-lenth"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-字符串长度校验-rulecollect-str-lenth"}},[t._v("#")]),t._v(" 3.3 字符串长度校验（RuleCollect.STR_LENTH）")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("   "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ShanHaiForm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FormRule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rulesForm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("rules "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Rule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ruleType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuleCollect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STR_LENTH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("scanFields "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"projectType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("max "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("errorCode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1002")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"不符合长度要求！"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restRules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RulesForm")]),t._v(" rulesForm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("min: 字符串最小长度")]),t._v(" "),s("p",[t._v("max:字符串最大长度")]),t._v(" "),s("p",[t._v("len: 字符串固定长度")]),t._v(" "),s("h3",{attrs:{id:"_3-4-枚举校验-rulecollect-enum"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-枚举校验-rulecollect-enum"}},[t._v("#")]),t._v(" 3.4 枚举校验（RuleCollect.ENUM）")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("     "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ShanHaiForm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FormRule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rulesForm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("rules "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Rule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ruleType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuleCollect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENUM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("scanFields "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"projectType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" enums "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("errorCode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1002")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"不符合格式要求！"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restRules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RulesForm")]),t._v(" rulesForm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("enums：枚举白名单")]),t._v(" "),s("h3",{attrs:{id:"_3-5-扩展自己的校验方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-扩展自己的校验方法"}},[t._v("#")]),t._v(" 3.5 扩展自己的校验方法")]),t._v(" "),s("p",[t._v("通过实现RuleScanService，并注册自己的规则到Spring容器中，即可实现自定义校验规则。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("@Service\npublic class XXXRule implements RuleScanService{\n    /**\n     * 注册规则定义\n     * @return\n     */\n    @Override\n    public String getScanType() {\n        //TODO 注册自己的校验类型（可参考RuleCollect）\n        return XXXCollect.XXX; \n    }\n    /**\n     *  扫描目标对象\n     * @param target 目标对象实例\n     * @param scanFields 目标对象扫描字段 \n     * @param execTarget 目标方法信息（跟踪日志使用）\n     * @param rule 规则定义\n     */\n    @Override\n    public void scanByScope(Object target, List<String> scanFields, String execTarget, Rule rule) {\n       //TODO 实现自己的校验方法\n       //当不符合预期时，使用throw new HttpFormRulesException()方式抛出异常\n    }\n}\n")])])]),s("h3",{attrs:{id:"_3-6-rule-参数scanfields详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-rule-参数scanfields详解"}},[t._v("#")]),t._v(" 3.6    @Rule 参数scanFields详解")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("scanFields字段范围")]),t._v(" "),s("th",[t._v("支持情况")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("*")]),t._v(" "),s("td",[t._v("支持")]),t._v(" "),s("td",[t._v("支持自动推导当前对象以及当前对象的嵌套对象内的全部字段")])]),t._v(" "),s("tr",[s("td",[t._v("currentObjField")]),t._v(" "),s("td",[t._v("支持")]),t._v(" "),s("td",[t._v("支持自动获取当前对象的全部字段信息")])]),t._v(" "),s("tr",[s("td",[t._v("currentObjField.child")]),t._v(" "),s("td",[t._v("支持")]),t._v(" "),s("td",[t._v("支持自动解析嵌套对象的全部字段信息")])]),t._v(" "),s("tr",[s("td",[t._v("currentObjField.child.child")]),t._v(" "),s("td",[t._v("支持")]),t._v(" "),s("td",[t._v("支持自动解析嵌套对象的嵌套对象的全部字段信息")])])])]),t._v(" "),s("p",[s("strong",[t._v("注：如果参数为Map/JSONObject等没有明确字段定义的，不适用于本组件。")])]),t._v(" "),s("p",[t._v("scanFields 如果为多个，使用,做分隔即可。如果scanFields中定义的字段在Object target 中不存在，则会被直接丢弃。")]),t._v(" "),s("p",[t._v("获取当前对象的某个字段的值，示例如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Object value= ObjectUtils.getFieldValueByName(target,field);\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);